# ============================================
# TASKS: DATA STRATEGY & INSIGHTS TEAM
# ============================================

# ============================================
# TASK 1: ANALYZE DATA
# Agent: Data Detective
# ============================================
analyze_data_task:
    description: >
      You are tasked with performing a strictly factual and statistical analysis based on two sources:
      1. 'statistical_analysis_report.md' – a report containing pre-computed metrics and summaries.
      2. 'data_cleaned.csv' – a cleaned dataset with raw observations.

      Your job:
      - Describe only WHAT is observed – do not interpret, speculate, or explain WHY.
      - Identify patterns, trends, outliers, and pre-calculated correlations.
      - Support every observation with actual values (e.g., "Sales increased from 200 to 340").
      - Include sample rows or values to illustrate patterns where possible.
      - Mention correlations only if they exist in the report or dataset, and include:
        * Method (Pearson, Spearman, etc.)
        * Exact coefficient (e.g., "r = 0.72")
        * Data source (CSV or report)
      - Formulate 10–15 clear research questions that are directly answerable using the dataset.
      - Present your report in structured Markdown with bullet points, headers, and clarity.

      Think of your report as a deliverable to senior business leaders. Be precise, factual, and data-driven.

    expected_output: >
      Markdown report named 'data_analysis_findings.md', structured as follows:

      ## 1. Data Overview
      - Scope, timeframe, key variables
      - Number of rows and columns
      - Sample variable names and types

      ## 2. Patterns & Findings
      - Bullet points with numerical summaries
      - Tables or samples to illustrate
      - Correlations with values and methods

      ## 3. Research Questions
      - List of 10–15 descriptive, data-answerable questions

      ## 4. Data Gaps
      - Any clearly missing fields or information relevant to analysis

    agent: data_detective


# ============================================
# TASK 2: GENERATE INSIGHTS
# Agent: Insight Generator
# ============================================
generate_insights_task:
    description: >
      Read the 'data_analysis_findings.md' report generated by the Data Detective.

      Your task is to generate business insights that explain WHY patterns exist, HOW they relate to each other, and WHAT they mean for business performance.

      For each insight:
      - Begin with a concise title and summary sentence.
      - Use 2–3 full sentences to explain the insight in business terms.
      - Always reference specific metrics or values from the data.
      - Explain the possible cause or correlation (if valid).
      - Avoid assumptions – only use information supported by the data.
      - Write in a clear, executive-level style.

    expected_output: >
      Markdown report 'business_insights.md' with:

      ## 1. Executive Summary
      - 3–5 sentence summary of the most important findings

      ## 2. Deep Dive Insights
      ### Insight 1: [Title]
      - The pattern: [Brief factual summary]
      - Why it matters: [Explanation of business relevance]
      - Connected findings: [Related variables or categories]
      - Business implications: [What this could indicate]

      [Repeat for 5–7 insights]

      ## 3. Root Cause Analysis
      - Key issues and possible underlying drivers
      - Explain how different metrics interact

      ## 4. Opportunity Areas
      - Data-supported opportunities (no recommendations)

      ## 5. Risk Areas
      - Metrics or patterns indicating concern or weakness

    agent: insight_generator
    context:
      - analyze_data_task


# ============================================
# TASK 3: PROVIDE ACTIONABLE RECOMMENDATIONS
# Agent: Action Advisor
# ============================================
provide_recommendations_task:
    description: >
      Read the following inputs:
      - 'data_analysis_findings.md' – descriptive facts and research questions
      - 'business_insights.md' – interpretation and implications

      Your mission is to translate insights into business action.

      Steps:
      1. Select 2–3 research questions from Agent 1 that:
         - Have measurable business impact (revenue, cost, efficiency)
         - Are answerable with the available data
         - Address strategic or operational challenges

      2. Answer those questions using:
         - Data analysis from the dataset
         - Key insights from Agent 2
         - External benchmarks using SerperDevTool

      3. Provide specific, actionable recommendations:
         - Use clear, unambiguous language
         - Include expected impact (numeric if possible)
         - Suggest implementation steps
         - Assign priority (High / Medium / Low)

      4. Identify 3–5 issues that should be visualized:
         - What to visualize, and why it will help
         - Type of chart or analysis
         - Business message to communicate

      Write as if preparing slides for business leadership: be clear, measurable, and strategic.

    expected_output: >
      Markdown report 'action_recommendations.md' with:

      ## 1. Executive Summary
      - Questions selected and why
      - Key findings summary
      - Top 3 recommendations

      ## 2. Research Questions Analysis
      ### Question 1: [Title]
      **Why this question matters:**
      - Business impact: [revenue/profit/efficiency]
      - Strategic importance: [decision relevance]

      **Data Analysis:**
      - Specific numbers from the dataset
      - Patterns or anomalies discovered

      **Benchmark Research:**
      - Industry best practices and figures
      - Relevant comparisons or case studies

      [Repeat for up to 3 questions]

      ## 3. Actionable Recommendations
      ### High Priority
      #### Recommendation 1: [Specific Action]
      - **What:** [Action]
      - **Why:** [Expected business impact]
      - **How:** [How to implement]
      - **Timeline:** [Suggested timeframe]
      - **Resources needed:** [Tools/teams/data]

      [Repeat for 5–10 total recommendations across priorities]

      ## 4. Implementation Roadmap
      - Quick Wins (0–3 months)
      - Medium-Term (3–6 months)
      - Long-Term (6–12 months)

      ## 5. OUTPUT FOR VISUALIZATION TEAM
      ### Key Insights to Communicate
      1. [From Agent 2]
      2. [From Agent 2]
      3. [From Agent 2]

      ### Issues Requiring Visualization
      #### Issue 1: [Title]
      - **Problem:** [Business context]
      - **Why Visualization:** [What needs to be clarified]
      - **Suggested Charts:** [Bar, Line, Heatmap, etc.]
      - **Data Needed:** [Variables]
      - **Key Message:** [Conclusion to draw]

    agent: action_advisor
    context:
      - analyze_data_task
      - generate_insights_task
